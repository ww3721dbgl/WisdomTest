<!DOCTYPE html>
<html style="height:100%;">
	<head>
		<meta charset="UTF-8">
		<title>南京市农路智慧管理平台</title>
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<link rel="stylesheet" href="../css/common.css" />
		<link rel="stylesheet" href="../css/rural-roads.css">
		<link rel="stylesheet" href="../layui/css/layui.css">
		<style type="text/css">
			.map-pop {
				position:fixed;
				width:100%;
				height:100%;
				top:0;
				left:0;
				background:rgba(0,0,0,0.35);
				display:none;
			}
			.map-pop .map-pop-warp{
				width:900px;
				height:600px;
				background:#fff;
				position:fixed;
				top:50%;
				left:50%;
				margin-top:-300px;
				margin-left:-450px;
				box-shadow:2px 2px 10px #A1A1A1;
				border-radius:5px;
			}
			.map-pop-header {
				height:50px;
				line-height:50px;
				background:#1E9FFF;
				color:#fff;
				padding-left:20px;
				position:relative;
				font-size:18px;
			}
			.layui-input-block input {
				width:300px;
			}
			.layui-form {
				padding-top:10px;
			}
			.close-pop-btn {
				position: absolute;
				top: 50%;
				right: 20px;
				width: 29px;
				height: 29px;
				background:#fff url(../images/close-pop-btn.png) no-repeat center center;
				border-radius:50%;
				margin-top: -15px;
				cursor: pointer;
			}
		</style>
	</head>
	<body class="road-map-page">
		<div class="iframe-content">
			<div id="map"></div>
			<div class="search-input">
				<input type="text"class="l"placeholder="请输入路线名称 如:城王路">
				<div class="search-btn l"></div>
			</div>
		</div>
		
		<div class="map-pop">
			<div class="map-pop-warp">
				<div class="map-pop-header">城王路<div class="close-pop-btn"onclick="$('iframe', window.parent.document).css('z-index','1');$('.map-pop').hide()"></div></div>
				<div class="layui-form">
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路线编码</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="L1235862353"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路线名称</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="城王路"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路段序号</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="8"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">行政区划</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="320625"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">起点桩号</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="k9+170"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">止点桩号</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="k10+270"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路段里程</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="6KM"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">车道数量</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="单车道"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">技术等级</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="四级"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路面类型</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="水泥混凝土"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路基宽度</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="7M"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">路面宽度</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="6M"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">建成时间</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="1996年"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">最近修建</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="0年"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">城管路段</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="否"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">可重复路段</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="否"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">地貌</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="平原"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">涵洞数量</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="0"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">管养单位</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="南京市六合区公路管理站"disabled="disabled">
						</div>
					</div>
					<div class="layui-form-item layui-col-xs12 layui-col-sm12 layui-col-md6">
						<label class="layui-form-label">通车时间</label>
						<div class="layui-input-block">
						  <input type="text" class="layui-input"value="1995-11-30"disabled="disabled">
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script type="text/javascript" src="../js/rural-roads.js"></script>
		<script type="text/javascript" src="../layui/layui.js"></script>
		<script type="text/javascript"src="../js/getscript.js"></script>
	</body>
</html>
<script type="text/javascript">
	
	setTimeout(function(){
		var map = new BMap.Map("map");    // 创建Map实例
		map.centerAndZoom(new BMap.Point(118.576813,32.448919),12);  //初始化地图,设置中心点坐标和地图级别
// 		$(".search-btn").click(function(){
// 			drawPolyline(map,1);
// 			map.centerAndZoom(new BMap.Point(118.732076,32.289808),17);  //初始化地图,设置中心点坐标和地图级别
// 		});
		map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
		//drawPolyline(map,0);
	},500);
	//绘制折线
	function drawPolyline(map,flag){
		
		if(flag==0){
			var polyline = new BMap.Polyline([
				new BMap.Point(118.739765,32.292677),
				new BMap.Point(118.737699,32.293272),
				new BMap.Point(118.736442,32.293463),
				new BMap.Point(118.734915,32.293737),
				new BMap.Point(118.734358,32.293814),
				new BMap.Point(118.733881,32.293898),
				new BMap.Point(118.73328,32.293936),
			    new BMap.Point(118.732615,32.29405),
				
				new BMap.Point(118.732148,32.294012),
				new BMap.Point(118.732274,32.292597),
				new BMap.Point(118.732211,32.292021),
				new BMap.Point(118.732229,32.291845),
				new BMap.Point(118.732211,32.29167),
				new BMap.Point(118.732202,32.29128),
				new BMap.Point(118.732202,32.291143),
				new BMap.Point(118.732148,32.290639),
				new BMap.Point(118.732049,32.289998),
				new BMap.Point(118.732175,32.288983),
				new BMap.Point(118.732121,32.288045),
				new BMap.Point(118.732139,32.287236),
				new BMap.Point(118.732256,32.284161),
			], {strokeColor:"#fa5546", strokeWeight:7, strokeOpacity:"1"});  //创建折线
		}else{
			if($("input").val()=='城王路'){
				var polyline = new BMap.Polyline([
					new BMap.Point(118.732148,32.294012),
					new BMap.Point(118.732274,32.292597),
					new BMap.Point(118.732211,32.292021),
					new BMap.Point(118.732229,32.291845),
					new BMap.Point(118.732211,32.29167),
					new BMap.Point(118.732202,32.29128),
					new BMap.Point(118.732202,32.291143),
					new BMap.Point(118.732148,32.290639),
					new BMap.Point(118.732049,32.289998),
					new BMap.Point(118.732175,32.288983),
					new BMap.Point(118.732121,32.288045),
					new BMap.Point(118.732139,32.287236),
					new BMap.Point(118.732256,32.284161),
				], {strokeColor:"blue", strokeWeight:7, strokeOpacity:"1"});  //创建折线
			}
		}
		
		
		  //增加折线
		  map.addOverlay(polyline);  
		  
		  //折现点击事件
		  function attribute(e){
			$('iframe', window.parent.document).css('z-index','999999999999999');
			$(".map-pop").show();
		  };
		  polyline.addEventListener("click",attribute);
		  
		  //添加文本
		  var opts = {
			  position : new BMap.Point(118.676228,32.101334),
			  offset   : new BMap.Size(-70,-20)
			}
		 var label = new BMap.Label("G40 隐患", opts);
			label.setStyle({
				 color : "red",
				 fontSize : "12px",
				 height : "20px",
				 lineHeight : "20px",
				 fontFamily:"微软雅黑",
				 border:"none",
				 background:"none"
			 });
		 map.addOverlay(label);   
	};
	
</script>